#!/bin/bash
#
# Leonid Kogan <leon@leonsio.com>
# Yet Another Homematic Management 
#
# Network management script, create new bridges for lxc containers
#


# Stop on Errors
set -e

# Default Parameter
BRIDGE="yahmbr0"
INTERFACE="eth0"
# Hilfe Output
show_help ()
{
cat << EOF
YAHM Network management script

Usage Example: 

./yahm-network [FLAG] COMMAND
./yahm-network -n mycccu -b mybridge attach_bridge

Flags:
-n          - LXC container name.
-f          - Force operation (no halt on errors).
-v          - Verbose output 
-b          - Bridge name
-i          - Interface name

Commands:
create_bridge      -
delete_bridge     -
attach_bridge      -
dettach_bridge     -
show_bridge        -
EOF
exit 1
}

PARAMETER="b:i:wfvn:"

# Include laden
source /opt/YAHM/share/include.sh

show_bridges()
{
    brctl show
}



if [[ $# != 1 ]]; then
    show_help
fi

for key in "$@"; do
    case $key in
        create_bridge)
            shift
            break;
        ;;
        attach_bridge)
            shift
            break;
        ;;
        deattach_bridge)
            shift
            break;
        ;;  
        delete_bridge)
            shift
            break;
        ;;
        show_bridge)
            show_bridges
            shift
            break;
        ;; 
        *)
            show_help
            exit 0
        ;;
    esac
done
